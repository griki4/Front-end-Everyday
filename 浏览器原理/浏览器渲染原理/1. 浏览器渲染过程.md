## 关键渲染路径

简要说明一下浏览器如何将收到的html文件渲染成页面的过程。

1. HTML解析器根据文档定义生成DOM节点并且构建DOM树。
2. 解析CSS文件，生成CSSOM树。
3. 根据DOM树和CSSOM树生成render树，也就是渲染树。渲染树中的节点包含了样式，不可见的节点不会在渲染树中。
4. 布局阶段，浏览器会弄清楚每个节点在页面中的具体位置和大小。回流和重排触发的时候就会回到这个阶段。
5. 绘制阶段
   - 分割图层。
   - 生成绘制列表，也就是绘制的命令。
   - 栅格化，也即是绘制图像。
   - 合成显示。渲染进程中的合成线程通知浏览器主进程页面渲染完毕，予以显示。

**注意，渲染引擎并不是等待HTML解析完毕之后才进行后续的布局和绘制过程。为了提供更佳的用户体验，一般来说都是解析了多少就显示多少。**

