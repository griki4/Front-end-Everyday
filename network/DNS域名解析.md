> DNS把域名和IP地址对上号。

#### DNS的作用

网络上的每一台主机都有自己对应的`IP`地址，但是`IP`地址是一串没有任何规律的字符串，不仅难记还容易记混。因此出现了`DNS`，他可以建立`IP`地址和域名之间的映射关系。

比如访问`www.baidu.com`，计算机实际上并不知道这个域名是啥意思，但是我们之所以能够访问到百度，是因为`DNS`帮助我们找到了这个域名对应的`IP`地址并且返回给浏览器，所以我们才能正常访问网页。

#### 域名结构树

以`www.baidu.com`为例，实际上这个域名最后还有一个`.`不过经常被忽略。最后这个`.`被称为根域名，管理`.com .cn .net`这样的顶级域名。`.com`这样的称为顶级域名，它负责管理各种权威域名，比如`baidu.com bilibili.com`这样的域名。`.baidu.com`这样的域名被称为权威域名，管理`www.baidu.com mail.baidu.com`这样的普通域名。

所谓管理，是说管理者知道被管理者所在的服务器的`IP`地址。比如根域名服务器，实际它是告诉我们管理`.com`这个顶级域名服务器所在的`IP`地址。

#### DNS域名解析

输入`ww.baidu.com`。

1. 查找本地缓存，有则返回缓存的结果，无则进入下一步。
2. 请求本地`DNS`服务器，本地`DNS`服务器查找缓存，有则返回缓存，无则进入下一步。
3. 本地`DNS`服务器请求根域名服务器，查询顶级域名服务器`.com`的`IP`地址。
4. 本地`DNS`服务器请求顶级域名服务器，查找`baidu.com`权威域名服务器所在的`IP`地址。
5. 本地`DNS`服务器请求权威域名服务器，查找`www.baidu.com`所在的服务器的地址。
6. 获取到`ww.baidu.com`对应的`IP`地址就可以返回给浏览器了。这里可能还存在一个寻找`CDN`的过程，返回给浏览器的可能是`CDN`的地址。

上述就是`DNS`域名解析的过程。

#### 递归和迭代查询

浏览器和本地`DNS`服务器之间采用递归查询，浏览器只需要发送一次请求就可以得到结果。因为浏览器本身并不关心解析的过程，只是在乎能不能得到域名解析的结果。

本地`DNS`解析域名则是迭代查询。上述步骤中我们也能发现本地`DNS`发送了多次请求，并且是一步一步进行的。下一次的请求必须依赖上一次请求的结果，因此是迭代的。

**`DNS`域名解析的过程一般采用`UDP`协议进行**。